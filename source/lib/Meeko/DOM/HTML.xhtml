<?xml version="1.0"?>
<html>
<head>
<script type="text/html" src="../ECMAScript5.xhtml"></script>
<script type="text/html" src="../DOM/System.xhtml"></script>
<script>
<![CDATA[

Meeko.stuff.xplSystem.createNamespace("Meeko.DOM.HTML");
Meeko.DOM.HTML = (function() {

// make abbr and output parse on Internet Explorer
document.createElement("abbr");
document.createElement("output");

var HTMLCollection = function() {}
var HTMLOptionsCollection = function() {}
var HTMLFormControlsCollection = function() {}
var HTMLDocument = function() {}
var HTMLElement = function() {}
var HTMLFormElement = function() {}
var HTMLSelectElement = function() {}
var HTMLInputElement = function() {}
var HTMLTableElement = function() {}
var HTMLTableSectionElement = function() {}
var HTMLTableRowElement = function() {}


if (document.documentElement.classList == null) {{

var HTML5Element = function(target) {
	if (null == target) return null; // TODO throw ??
	if (this == window) return null;
	else arguments.callee.prototype.xblCreate.call(this, target);
}
HTML5Element.prototype.xblCreate = function(target) {
	var getClassName = function() { return this.className; };
	var setClassName = function(val) { this.className = val; };
	this.classList = new DOMTokenList(getClassName.bind(target), setClassName.bind(target));
	Meeko.stuff.domSystem.bindInterface(target, this, ["classList"]);
}
HTML5Element.prototype.xblDestroy = function(target) {
	// FIXME Meeko.stuff.domSystem.unbindInterface()
	Meeko.stuff.domSystem.releaseInterface(target, this, ["classList"]);
	this.classList.xblDestroy(); // FIXME is this necessary
	this.classList = null;
}

Meeko.stuff.domSystem.addImplementation("HTMLElement", HTML5Element);
}}


return {
	HTMLCollection: HTMLCollection,
	HTMLOptionsCollection: HTMLOptionsCollection,
	HTMLFormControlsCollection: HTMLFormControlsCollection,
	HTMLDocument: HTMLDocument,
	HTMLElement: HTMLElement,
	HTMLFormElement: HTMLFormElement,
	HTMLSelectElement: HTMLSelectElement,
	HTMLInputElement: HTMLInputElement,
	HTMLTableElement: HTMLTableElement,
	HTMLTableSectionElement: HTMLTableSectionElement,
	HTMLTableRowElement: HTMLTableRowElement
};

})();

//Meeko.XPL.Namespace.enhance(window, Meeko.DOM.HTML);


]]>
</script>
</head>
</html>
